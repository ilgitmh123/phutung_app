{% extends 'base.html' %}
{% block title %}{{ p.name }} – NGUYÊN SHOP{% endblock %}
{% block content %}
<article class="grid md:grid-cols-2 gap-8">
  <div class="card rounded-2xl p-4">
    <img class="w-full rounded-xl"
         src="{{ p.attributes.image|default:'https://dummyimage.com/640x400/0e1624/93a3b8&text='|add:p.sku }}"
         alt="{{ p.name }}"/>
  </div>
  <div>
    <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full border border-emerald-400/30 text-emerald-200 text-xs">
      ✅ Hàng chính hãng • 🔁 Đổi trả 7 ngày
    </div>
    <h1 class="mt-3 text-2xl font-extrabold">{{ p.name }}</h1>
    <div class="mt-1 text-white/60">SKU: {{ p.sku }}{% if p.oem_code %} • OEM: {{ p.oem_code }}{% endif %}</div>
    <div class="mt-4 text-3xl text-emerald-300 font-extrabold">{{ p.retail_price|floatformat:0 }} đ</div>
    <p class="mt-4 text-white/70">{{ p.meta_description }}</p>

    <form action="/orders/api/create" method="post" class="mt-6">
      {% csrf_token %}
      <input type="hidden" name="items" value='[{"sku":"{{ p.sku }}","qty":1}]'/>
      <button class="btn px-5 py-2 rounded-xl font-semibold hover:brightness-110">➕ Thêm vào giỏ</button>
      <a href="/shop/" class="ml-2 px-5 py-2 rounded-xl border border-white/10 hover:bg-white/5">← Tiếp tục mua</a>
    </form>

    <div class="mt-6 grid sm:grid-cols-2 gap-3">
      <div class="card rounded-xl p-4">
        <div class="text-sm text-white/60 mb-1">Thuộc tính</div>
        <pre class="text-xs whitespace-pre-wrap text-white/70">{{ p.attributes|json_script:"attr" }}</pre>
      </div>
      <div class="card rounded-xl p-4">
        <div class="text-sm text-white/60 mb-1">Mô tả</div>
        <div class="text-white/70">{{ p.description|default:"Đang cập nhật…" }}</div>
      </div>
    </div>
  </div>
</article>
{% endblock %}
