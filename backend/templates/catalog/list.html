{% extends 'base.html' %}
{% block title %}Danh mục – NGUYÊN SHOP{% endblock %}
{% block content %}
<div class="flex items-center gap-3">
  <form class="flex-1" method="get">
    <input name="q" value="{{ q }}" placeholder="🔎 Tìm theo tên / SKU / OEM"
           class="w-full bg-[#111825] border border-white/10 rounded-xl px-4 py-2 outline-none focus:ring-2 focus:ring-emerald-300/40"/>
  </form>
  <a href="/shop/" class="px-3 py-2 rounded-xl border border-white/10 hover:bg-white/5">Làm mới</a>
</div>

<div class="grid sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 mt-4">
  {% for p in page_obj.object_list %}
    <a href="{% url 'product_detail' p.slug %}" class="card rounded-2xl p-4 hover:shadow-lg transition">
      <div class="text-xs text-white/60">SKU {{ p.sku }}</div>
      <div class="mt-1 font-semibold line-clamp-2">{{ p.name }}</div>
      <div class="mt-2 text-emerald-300 font-bold">{{ p.retail_price|floatformat:0 }} đ</div>
    </a>
  {% empty %}
    <div class="text-white/60">Không có sản phẩm phù hợp 🔍</div>
  {% endfor %}
</div>

<div class="mt-6 flex justify-center gap-2">
  {% if page_obj.has_previous %}
    <a class="px-3 py-1 rounded border border-white/10 hover:bg-white/5" href="?q={{ q }}&page={{ page_obj.previous_page_number }}">« Trước</a>
  {% endif %}
  <span class="px-3 py-1">Trang {{ page_obj.number }} / {{ page_obj.paginator.num_pages }}</span>
  {% if page_obj.has_next %}
    <a class="px-3 py-1 rounded border border-white/10 hover:bg-white/5" href="?q={{ q }}&page={{ page_obj.next_page_number }}">Sau »</a>
  {% endif %}
</div>
{% endblock %}
